# Example slurm.conf file. Please run configurator.html
# (in doc/html) to build a configuration file customized
# for your environment.
#
#
# slurm.conf file generated by configurator.html.
#
# See the slurm.conf man page for more information.
#
ClusterName=firefly
ControlMachine=firefly
ControlAddr=firefly
#
SlurmUser=slurm
SlurmctldPort=6817
SlurmdPort=6818
AuthType=auth/munge
CryptoType=crypto/munge
#JobCredentialPrivateKey=
#JobCredentialPublicCertificate=
StateSaveLocation=/SLURM
SlurmdSpoolDir=/var/log/slurm/spool_slurmd
SwitchType=switch/none
MpiDefault=none

SlurmctldPidFile=/var/run/slurmctld.pid
#SlurmdPidFile=/var/run/slurmd.pid #changed to cure nodes's slurmd hanging with systemctl scripts
SlurmdPidFile=/var/log/slurm/slurmd.pid

ProctrackType=proctrack/linuxproc
#PluginDir=
CacheGroups=0
#FirstJobId=
ReturnToService=0
#MaxJobCount=

MaxArraySize=1000

#PlugStackConfig=
#PropagatePrioProcess=
#PropagateResourceLimits=
#PropagateResourceLimitsExcept=
Prolog=/home/slurm/scripts/slurm_prolog
Epilog=/home/slurm/scripts/slurm_epilog
#SrunProlog=
#SrunEpilog=
#TaskProlog=
#TaskEpilog=
#TaskPlugin=task/affinity

#TaskPluginParam=cpusets
TaskPluginParam=sched
#TrackWCKey=no
#TreeWidth=50
#TmpFS=
#UsePAM=
#
# TIMERS
SlurmctldTimeout=300
SlurmdTimeout=300
InactiveLimit=60
MinJobAge=30
KillWait=30
Waittime=30
#
# GPU configuration
#grestypes=gpu
#

# SCHEDULING
SchedulerType=sched/backfill
#SchedulerAuth=
#SchedulerPort=
#SchedulerRootFilter=
#SelectType=select/linear
SelectType=select/cons_res
SelectTypeParameters=CR_Core_Memory
#
FastSchedule=1
PriorityType=priority/multifactor


JobRequeue=1

# LOGGING
SlurmctldDebug=3
SlurmctldLogFile=/var/log/slurm/slurmctld.log
SlurmdDebug=3
SlurmdLogFile=/var/log/slurm/slurmd.log.%h
JobCompType=jobcomp/none
#JobCompLoc=
#
# ACCOUNTING
##JobAcctGatherType=jobacct_gather/linux
##JobAcctGatherFrequency=30
#
AccountingStorageType=accounting_storage/none
AccountingStorageHost=mercury
#AccountingStorageLoc=
#AccountingStoragePass=
#AccountingStorageUser=

# Topology scheduling
#TopologyPlugin=topology/tree

# Added to display densor data
#ExtSensorsType=ext_sensors/rrd
#ExtSensorsFreq=600
EnforcePartLimits=YES

# Submission script/plugin
#JobSubmitPlugins=lua

#AccountingStorageEnforce=Limits


#
# COMPUTE NODES
NodeName=node[101-110] Procs=8 Sockets=2 CoresPerSocket=4 RealMemory=16000 State=UNKNOWN
PartitionName=all Nodes=node[1-10] DefaultTime=4:00:00 MaxTime=48:00:00 Default=YES State=UP
